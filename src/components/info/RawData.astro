---
import { NewsService } from "../../services/news.service";
import { UserService } from "../../services/user.service";

const isAdmin = UserService.isConnectedAsAdmin(
  (name) => Astro.cookies.get(name)?.value
);
---

{
  isAdmin && (
    <fieldset>
      <legend>Raw data</legend>
      <details>
        <summary>news.json</summary>
        <textarea>
          {JSON.stringify(NewsService.getNews(), undefined, 2)}
        </textarea>
      </details>
      <details>
        <summary>users.json</summary>
        <textarea>
          {JSON.stringify(UserService.getUsers(), undefined, 2)}
        </textarea>
      </details>
    </fieldset>
  )
}

<style>
  textarea {
    width: 100%;
    min-height: 20rem;
  }
</style>
